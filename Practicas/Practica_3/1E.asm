ORG 1000H
 PATRON DB 0
 FIN DB 0
 
ORG 3000H
 RUT_CLK: PUSH AX
 INC PATRON
 CMP PATRON, 11111111b
 JNZ LUCES
 MOV AL, 0FFH
 
 OUT 21H, AL
 
 JMP FINAL
 
 LUCES: MOV AL, PATRON
 OUT 31H, AL
 MOV AL, 0
 OUT 10H, AL
 
 FINAL: MOV AL, 20H
 OUT 20H, AL
 POP AX
IRET
 
ORG 2000H

 MOV AL, 11111111b
 OUT 32H, AL ;CA = 11111111
 MOV AL, 00000000B
 OUT 33H, AL ;CB = 00000000

 MOV AX, RUT_CLK
 MOV BX, 40
 MOV [BX], AX

 CLI
 MOV AL, 11111101b ;Activamos el timer
 OUT 21H, AL ; PIC: registro IMR
 
 MOV AL, 10
 OUT 25H, AL ; PIC: registro INT1 (Timer)
 MOV AL, 1 ;1 SEGUNDO
 OUT 11H, AL ; TIMER: registro COMP (No se cual es)
 MOV AL, 0
 OUT 23H, AL ; TIMER: registro CONT
 OUT 21H, AL
 OUT 10H, AL
 
 STI
 LAZO: JMP LAZO
END